I"*ˆ<h1 id="problem">Problem</h1>

<p>A cityâ€™s skyline is the outer contour of the silhouette formed by all the buildings in that city when viewed from a distance. Now suppose you are given the locations and height of all the buildings as shown on a cityscape photo (Figure A), write a program to output the skyline formed by these buildings collectively (Figure B).</p>

<p><img src="/assets/img/leetcode/skyline_a.png" alt="" /> <img src="/assets/img/leetcode/skyline_b.png" alt="" /></p>

<p>Buildings Skyline Contour
The geometric information of each building is represented by a triplet of integers <code class="highlighter-rouge">[Li, Ri, Hi]</code>, where <code class="highlighter-rouge">Li</code> and <code class="highlighter-rouge">Ri</code> are the x coordinates of the left and right edge of the ith building, respectively, and <code class="highlighter-rouge">Hi</code> is its height. It is guaranteed that <code class="highlighter-rouge">0 â‰¤ Li, Ri â‰¤ INT_MAX</code>, <code class="highlighter-rouge">0 &lt; Hi â‰¤ INT_MAX</code>, and <code class="highlighter-rouge">Ri - Li &gt; 0</code>. You may assume all buildings are perfect rectangles grounded on an absolutely flat surface at height 0.</p>

<p>For instance, the dimensions of all buildings in Figure A are recorded as: <code class="highlighter-rouge">[ [2 9 10], [3 7 15], [5 12 12], [15 20 10], [19 24 8] ]</code> .</p>

<p>The output is a list of â€œkey pointsâ€ (red dots in Figure B) in the format of <code class="highlighter-rouge">[ [x1,y1], [x2, y2], [x3, y3], ... ]</code> that uniquely defines a skyline. A key point is the left endpoint of a horizontal line segment. Note that the last key point, where the rightmost building ends, is merely used to mark the termination of the skyline, and always has zero height. Also, the ground in between any two adjacent buildings should be considered part of the skyline contour.</p>

<p>For instance, the skyline in Figure B should be represented as:<code class="highlighter-rouge">[ [2 10], [3 15], [7 12], [12 0], [15 10], [20 8], [24, 0] ]</code>.</p>

<h2 id="note">Note</h2>

<ul>
  <li>The number of buildings in any input list is guaranteed to be in the range <code class="highlighter-rouge">[0, 10000]</code></li>
  <li>The input list is already sorted in ascending order by the left x position <code class="highlighter-rouge">Li</code></li>
  <li>The output list must be sorted by the x position</li>
  <li>There must be no consecutive horizontal lines of equal height in the output skyline. For instance, <code class="highlighter-rouge">[...[2 3], [4 5], [7 5], [11 5], [12 7]...]</code> is not acceptable; the three lines of height 5 should be merged into one in the final output as such: <code class="highlighter-rouge">[...[2 3], [4 5], [12 7], ...]</code></li>
</ul>

<h1 id="my-answer">My Answer</h1>

<ul>
  <li>ì•Œê³ ë¦¬ì¦˜ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
    <ol>
      <li>xì¢Œí‘œëŒ€ë¡œ ì§„í–‰ í•˜ë©´ì„œ, ë†’ì´ ì°¨ê°€ ë°œìƒí• ë•Œ ë§ˆë‹¤ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ë„£ìœ¼ë©´ ëœë‹¤.</li>
      <li>ì˜ˆì œ ì²˜ëŸ¼ <code class="highlighter-rouge">[2 9 10]</code> ì¼ë•Œ 2ê°œì˜ ì¢Œí‘œê°€ ë‚˜ì˜¨ë‹¤. <code class="highlighter-rouge">[[2 10], [9 10]]</code> ì•ì˜ ì¢Œí‘œëŠ” ë¹Œë”©ì˜ ì‹œì‘ ì¢Œí‘œì´ê³ , ë’¤ì˜ ì¢Œí‘œëŠ” ë¹Œë”©ì˜ ë ì¢Œí‘œ ì´ë‹¤.</li>
      <li>
        <p><code class="highlighter-rouge">[3 7 15]</code>ê¹Œì§€ ì¶”ê°€ ë˜ë©´ <code class="highlighter-rouge">[[2 10], [9 10], [3 15], [7 15]]</code>ê°€ ëœë‹¤. ì´ê±¸ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

        <p><img src="/assets/img/leetcode/skyline_ex_1.png" alt="" /></p>
        <blockquote>
          <p>ë¹¨ê°„ ì ì€ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ë“¤ì–´ê°€ì•¼í•œ ì¢Œí‘œë“¤ <code class="highlighter-rouge">[[2 10], [3 15], [7 10], [9 0]]</code></p>
        </blockquote>
      </li>
      <li>ìœ„ ê·¸ë¦¼ì—ì„œ ë³´ë“¯ì´ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ë“¤ì–´ê°€ì•¼í•˜ëŠ” ê²ƒë“¤ì€ ë†’ì´ ì°¨ê°€ ë°œìƒí• ë•Œ ë¼ëŠ”ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</li>
      <li>ë†’ì´ ì°¨ê°€ ë°œìƒí–ˆë‹¤ ë¼ëŠ”ê²ƒì„ ì•Œê¸° ìœ„í•´ì„œ, ê¸°ì¡´ì˜ ìµœëŒ€ ë†’ì´ <code class="highlighter-rouge">prev_max_h</code> ì™€ í˜„ì¬ ì¢Œí‘œ ì…ì¥ì—ì„œì˜ ìµœëŒ€ ë†’ì´ <code class="highlighter-rouge">curr_max_h</code>, ê·¸ë¦¬ê³  ì§€ê¸ˆê¹Œì§€ ê±°ì³ì™”ë˜ ë†’ì´ë“¤ì„ ì €ì¥í•  ë°ì´í„° ìŠ¤íŠ¸ëŸ­ì³ <code class="highlighter-rouge">queue_h</code>ê°€ í•„ìš” í•˜ë‹¤.</li>
      <li>ì²˜ìŒ <code class="highlighter-rouge">prev_max_h</code>ë¥¼ 0ìœ¼ë¡œ í•´ì„œ ì¢Œí‘œë¥¼ ìˆœíšŒ í•˜ë©´ì„œ, ì¢Œí‘œê°€ ë¹Œë”©ì˜ ì‹œì‘ ì¢Œí‘œì¸ ê²½ìš°ì—” <code class="highlighter-rouge">queue_h</code>ì— í˜„ì¬ ë†’ì´ ë¥¼ ë„£ê³ , <code class="highlighter-rouge">curr_max_h</code>ì—ëŠ” <code class="highlighter-rouge">queue_h</code>ì— ìˆëŠ” ë†’ì´ë“¤ì¤‘ ê°€ì¥ í° ê°’ì„ í• ë‹¹í•œë‹¤.</li>
      <li>ë§Œì•½ <code class="highlighter-rouge">prev_max_h</code>ì™€ <code class="highlighter-rouge">curr_max_h</code>ê°€ ë‹¤ë¥´ë‹¤ë©´, ë†’ì´ì°¨ê°€ ë°œìƒí•œ ê²ƒì´ë‹ˆ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ í•˜ë©´ ë˜ëŠ”ë°, <code class="highlighter-rouge">[í˜„ì¬ x, curr_max_h]</code> í˜•íƒœë¡œ ì¶”ê°€í•˜ê³ , 6~7ë²ˆì„ ë°˜ë³µí•œë‹¤.</li>
      <li><code class="highlighter-rouge">[[2 10], [9 10], [3 15], [7 15]]</code>ì˜ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ íë¦„ì´ ëœë‹¤.
        <ol>
          <li>í˜„ì¬ ì¢Œí‘œ = <code class="highlighter-rouge">[2 10]</code>, <code class="highlighter-rouge">prev_max_h</code> = 0, <code class="highlighter-rouge">queue_h</code> = [0, 10], <code class="highlighter-rouge">curr_max_h</code> = 10</li>
          <li><code class="highlighter-rouge">prev_max_h</code>ì™€ <code class="highlighter-rouge">curr_max_h</code>ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— <code class="highlighter-rouge">[í˜„ì¬ x, curr_max_h] = [2 10]</code> ì¶”ê°€</li>
          <li><code class="highlighter-rouge">prev_max_h</code>ì— <code class="highlighter-rouge">curr_max_h</code> í• ë‹¹. <code class="highlighter-rouge">prev_max_h</code> = 10</li>
          <li>ë‹¤ìŒ ì¢Œí‘œë¡œ ë°˜ë³µ ìˆ˜í–‰</li>
        </ol>
      </li>
      <li>6ë²ˆ ë‚´ìš©ì„ ìˆ˜í–‰í•˜ê¸° ì´ì „ì— ì •ë ¬ì„ í•´ì¤˜ì•¼ í•œë‹¤. xì¢Œí‘œì— ë”°ë¼ ìˆœì°¨ ëŒ€ë¡œ ì§„í–‰ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, <code class="highlighter-rouge">[[2 10],[3 15],[7 15],[9 10]]</code>ë¡œ 6ë²ˆì„ ì‹œì‘ í•´ì•¼ í•œë‹¤.</li>
    </ol>
  </li>
  <li>ê° xì¢Œí‘œì— ë”°ë¥¸ ë†’ì´ ê°’ì„ ì €ì¥í•˜ëŠ” êµ¬ì¡°ì²´ <code class="highlighter-rouge">Point</code>ë¥¼ ë§Œë“¤ì.</li>
  <li>xì¢Œí‘œ ë³„ë¡œ <code class="highlighter-rouge">building</code>ì˜ <code class="highlighter-rouge">Li</code>ì— í•´ë‹¹ í•˜ë©´ <code class="highlighter-rouge">isStart</code>ë¥¼ <code class="highlighter-rouge">true</code>ë¡œ í•˜ê³ , <code class="highlighter-rouge">Ri</code>ì— í•´ë‹¹ í•˜ë©´ <code class="highlighter-rouge">isStart</code>ë¥¼ <code class="highlighter-rouge">false</code>ë¡œ í•˜ì.</li>
  <li>ì´ ìƒì„±ë˜ëŠ” <code class="highlighter-rouge">Point</code>ì˜ ê°¯ìˆ˜ëŠ” <code class="highlighter-rouge">building</code>ì˜ ê°¯ìˆ˜ x 2ê°€ ë˜ê³ , <code class="highlighter-rouge">points</code> ë°°ì—´ì— ì €ì¥í•˜ì.</li>
  <li><code class="highlighter-rouge">points</code>ë¥¼ ì •ë ¬ í•œë‹¤, ì´ë•Œ ì •ë ¬ ì¡°ê±´ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
    <ol>
      <li>x ì¢Œí‘œê°€ ë‹¤ë¥´ë‹¤ë©´ xê°’ì´ ì‘ì€ê²ƒ ìš°ì„ </li>
      <li><code class="highlighter-rouge">isStart</code>ê°€ <code class="highlighter-rouge">true</code>ë¼ë©´ <code class="highlighter-rouge">ë†’ì´</code>ê°€ í° ê²ƒ ìš°ì„ , <code class="highlighter-rouge">isStart</code>ê°€ <code class="highlighter-rouge">false</code>ë¼ë©´ <code class="highlighter-rouge">ë†’ì´</code>ê°€ ì‘ì€ ê²ƒ ìš°ì„ </li>
    </ol>
  </li>
  <li><code class="highlighter-rouge">points</code>ë¥¼ ìˆœíšŒ í•˜ë©´ì„œ, ë†’ì´ë“¤ì„ ì €ì¥í•˜ë©´ì„œ, ë†’ì´ê°€ í° ìˆœì„œ ëŒ€ë¡œ ì •ë ¬ë  <code class="highlighter-rouge">PriorityQueue</code>ë¥¼ ì¤€ë¹„ í•œë‹¤.</li>
  <li>í˜„ì¬ <code class="highlighter-rouge">Point</code>ê°€ <code class="highlighter-rouge">isStart</code>ë¼ë©´ <code class="highlighter-rouge">PriorityQueue</code>ì— ë„£ê³ , ì•„ë‹ˆë¼ë©´ ëº€ë‹¤.</li>
  <li><code class="highlighter-rouge">PriorityQueue</code>ì˜ ì œì¼ ì•ì— ìˆëŠ” ê°’, ì¦‰ ë†’ì´ê°€ ê°€ì¥ ë†’ì€ê²ƒì„ ê°€ì ¸ì˜¨ í›„, ì´ì „ ìˆœíšŒì—ì„œ ê²°ì •ëœ ë†’ì´ê°’ê³¼ ë¹„êµí•´ì„œ, ë‹¤ë¥´ë‹¤ë©´ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">class</span> <span class="nc">Point</span> <span class="kd">implements</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="nc">Point</span><span class="o">&gt;{</span>
        <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">height</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">isStart</span><span class="o">;</span>
        
        <span class="kd">public</span> <span class="nf">Point</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">height</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isStart</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">height</span> <span class="o">=</span> <span class="n">height</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="na">isStart</span> <span class="o">=</span> <span class="n">isStart</span><span class="o">;</span>
        <span class="o">}</span>
        
        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Point</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">!=</span> <span class="n">p</span><span class="o">.</span><span class="na">x</span><span class="o">)</span> <span class="o">{</span>    <span class="c1">//xê°€ ë‹¤ë¥¸ê±´ ë³¼ê²ƒë„ ì—†ë‹¤, xê°’ì´ ì‘ì€ê²ƒì„ ìš°ì„ í•˜ì.</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="na">x</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>                <span class="c1">//xê°€ ë™ì¼ í•˜ë‹¤ë©´, thisì™€ pê°€ isStartë¼ë©´ ë†’ì´ê°€ í°ê²ƒì„ ìš°ì„ ìœ¼ë¡œ í•˜ê³ , ì•„ë‹ˆë¼ë©´ ë†’ì´ê°€ ì‘ì€ê²ƒì„ ìš°ì„  í•˜ì.</span>
                <span class="k">return</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">isStart</span> <span class="o">?</span> <span class="o">-</span><span class="k">this</span><span class="o">.</span><span class="na">height</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span><span class="o">)</span> <span class="o">-</span> <span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">isStart</span> <span class="o">?</span> <span class="o">-</span><span class="n">p</span><span class="o">.</span><span class="na">height</span> <span class="o">:</span> <span class="n">p</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>          
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="nf">getSkyline</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">buildings</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="kt">int</span> <span class="n">total_count</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span> <span class="n">total_count</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
        <span class="o">}</span>
        
        <span class="nc">Point</span><span class="o">[]</span> <span class="n">points</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">[</span><span class="n">total_count</span> <span class="o">*</span> <span class="mi">2</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        
        <span class="k">for</span><span class="o">(</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">building</span> <span class="o">:</span> <span class="n">buildings</span> <span class="o">)</span> <span class="o">{</span> <span class="c1">//building í•˜ë‚˜ [Li, Ri, Hi]ë¥¼ ì´ìš©í•´ì„œ 2ê°œì˜ Pointë¥¼ ë§Œë“¤ì, [Li, Hi, true], [Ri, Hi, false]</span>
            <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">++]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">(</span><span class="n">building</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">building</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="kc">true</span><span class="o">);</span>       
            <span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">++]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Point</span><span class="o">(</span><span class="n">building</span><span class="o">[</span><span class="mi">1</span><span class="o">],</span> <span class="n">building</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="kc">false</span><span class="o">);</span>
        <span class="o">}</span>
        
        <span class="nc">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">points</span><span class="o">);</span>    <span class="c1">//ì •ë ¬ì„ ë°˜ë“œì‹œ í•´ì¤˜ì•¼ í•œë‹¤.</span>
        
        <span class="nc">PriorityQueue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">height_queue</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PriorityQueue</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;(</span><span class="nc">Collections</span><span class="o">.</span><span class="na">reverseOrder</span><span class="o">());</span>   <span class="c1">//ìˆœíšŒëŒë©´ì„œ, ê±°ì³ê°„ Pointì˜ ë†’ì´ ê°’ì„ ì €ì¥í•˜ê³ , ê°’ì´ í° ìˆœì„œëŒ€ë¡œ ì €ì¥í•  Queue</span>
        <span class="n">height_queue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>    <span class="c1">//ê¸°ë³¸ ë†’ì´ 0ì„ ë„£ì–´ ì£¼ì.</span>
        
        <span class="kt">int</span> <span class="n">prev_max_height</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span> <span class="nc">Point</span> <span class="n">point</span> <span class="o">:</span> <span class="n">points</span> <span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span> <span class="n">point</span><span class="o">.</span><span class="na">isStart</span> <span class="o">)</span> <span class="o">{</span>      <span class="c1">//ì‹œì‘ ì¢Œí‘œë¼ë©´ í˜„ì¬ Pointì˜ ë†’ì´ì˜ ì‹œì‘ì´ë‹ˆê¹Œ ë„£ì–´ ì£¼ê³ , ë ì¢Œí‘œë¼ë©´ í˜„ì¬ ë†’ì´ëŠ” ì²˜ë¦¬ í–ˆë‹¤ëŠ” ì˜ë¯¸ë‹ˆê¹Œ ë¹¼ì£¼ì.</span>
                <span class="n">height_queue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">point</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">height_queue</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">point</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>
            <span class="o">}</span>
            
            <span class="kt">int</span> <span class="n">current_max_height</span> <span class="o">=</span> <span class="n">height_queue</span><span class="o">.</span><span class="na">peek</span><span class="o">();</span>
            
            <span class="k">if</span> <span class="o">(</span> <span class="n">prev_max_height</span> <span class="o">!=</span> <span class="n">current_max_height</span> <span class="o">)</span> <span class="o">{</span>      <span class="c1">//ì´ì „ ìµœê³  ë†’ì´ì™€ í˜„ì¬ ìµœê³  ë†’ì´ê°€ ë‹¤ë¥´ë‹¤ëŠ”ê²ƒì€ ë†’ì´ì°¨ê°€ ë°œìƒí–ˆë‹¤. ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ í•˜ì.</span>
                <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">point</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="n">current_max_height</span><span class="o">));</span>
                <span class="n">prev_max_height</span> <span class="o">=</span> <span class="n">current_max_height</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>   
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="fastest-answer">Fastest Answer</h1>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
</pre></td><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="nf">getSkyline</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">buildings</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="n">keyPoints</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="kt">int</span> <span class="n">lastLowXIdx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">building</span> <span class="o">:</span> <span class="n">buildings</span><span class="o">){</span>
            <span class="kt">int</span> <span class="n">li</span> <span class="o">=</span> <span class="n">building</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">ri</span> <span class="o">=</span> <span class="n">building</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">building</span><span class="o">[</span><span class="mi">2</span><span class="o">];</span>
            <span class="n">lastLowXIdx</span> <span class="o">=</span> <span class="n">insertBuilding</span><span class="o">(</span><span class="n">li</span><span class="o">,</span> <span class="n">ri</span><span class="o">,</span> <span class="n">hi</span><span class="o">,</span> <span class="n">keyPoints</span><span class="o">,</span> <span class="n">lastLowXIdx</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">keyPoints</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="kt">int</span> <span class="nf">insertBuilding</span><span class="o">(</span><span class="kt">int</span> <span class="n">li</span><span class="o">,</span> <span class="kt">int</span> <span class="n">ri</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="n">keyPoints</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lastLowXIdx</span><span class="o">){</span>
        <span class="kt">int</span> <span class="n">nextIdx</span> <span class="o">=</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">lastLowXIdx</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++){</span>   <span class="c1">//ê¸°ì¡´ì˜ ê²°ê³¼ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ”ê²ƒë“¤ ì¤‘ì—ì„œ í˜„ì¬ ë¹Œë”©ì˜ Li ë³´ë‹¤ í° xì¸ê²ƒì„ ì°¾ëŠ”ë‹¤. ì™œëƒí•˜ë©´, ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ë¥¼ xê°’ìœ¼ë¡œ ì •ë ¬ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸.</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">li</span><span class="o">){</span>
                <span class="n">nextIdx</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kt">int</span> <span class="n">currIdx</span> <span class="o">=</span> <span class="n">nextIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="o">;</span>  <span class="c1">//ì¢Œí‘œê°€ ë“¤ì–´ê°ˆ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì˜ index</span>
        <span class="kt">int</span> <span class="n">oldHight</span> <span class="o">=</span> <span class="n">currIdx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>    <span class="c1">//ê¸°ì¡´ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ìˆë˜ ë†’ì´</span>
        <span class="kt">int</span> <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">oldHight</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">hi</span> <span class="o">&gt;</span> <span class="n">oldHight</span><span class="o">){</span> <span class="c1">//í˜„ì¬ ë¹Œë”©ì˜ ë†’ì´ê°€ ê¸°ì¡´ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ìˆë˜ ë†’ì´ ë³´ë‹¤ í¬ê³ </span>
            <span class="k">if</span> <span class="o">(</span><span class="n">currIdx</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">&lt;</span> <span class="n">li</span><span class="o">)</span> <span class="o">{</span>    <span class="c1">//í˜„ì¬ indexê°€ 0ë³´ë‹¤ ì‘ê±°ë‚˜ ( ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ ìˆì—ˆë‹¤ ), xê°€ lië³´ë‹¤ ì‘ë‹¤ë©´ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€.</span>
                <span class="n">keyPoints</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">currIdx</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">makeKeyPoint</span><span class="o">(</span><span class="n">li</span><span class="o">,</span> <span class="n">hi</span><span class="o">));</span>
                <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">hi</span><span class="o">;</span>
                <span class="n">currIdx</span><span class="o">++;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>    <span class="c1">//xê°€ liì™€ ê°™ë‹¤. ì¦‰ ê°™ì€ ë¹Œë”©ì˜ ì‹œì‘ ìœ„ì¹˜ê°€ ë™ì¼í•œë°, ë†’ì´ê°€ ë‹¤ë¥´ë‹¤.</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">currIdx</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span> <span class="o">-</span> <span class="mi">1</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">==</span> <span class="n">hi</span><span class="o">){</span>   <span class="c1">//ë„£ì–´ì•¼ í•  ìœ„ì¹˜ ì´ì „ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì˜ ê°’ì˜ ë†’ì´ê°€ í˜„ì¬ ë†’ì´ì™€ ë™ì¼í•˜ë‹¤. ???????</span>
                    <span class="n">keyPoints</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">currIdx</span><span class="o">);</span>
                    <span class="n">currIdx</span><span class="o">--;</span>
                    <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">hi</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>    <span class="c1">//ë†’ì´ë§Œ ë‹¤ì‹œ ê°±ì‹ í•´ ì£¼ì.</span>
                    <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>
                    <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">hi</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">oldHight</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">lastLowXIdx</span> <span class="o">=</span> <span class="n">currIdx</span><span class="o">;</span>

        <span class="n">currIdx</span> <span class="o">++;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">currIdx</span> <span class="o">&lt;</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">&lt;</span> <span class="n">ri</span><span class="o">){</span>   <span class="c1">//ê¸°ì¡´ì˜ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì˜ xê°’ë“¤ ì¤‘, Rië³´ë‹¤ ì‘ì€ê²ƒë“¤, ì¦‰ í˜„ì¬ ë¹Œë”©ì´ ì¶”ê°€ ë¨ìœ¼ë¡œ ì¸í•´ì„œ ì—†ì–´ì ¸ì•¼ í•˜ê±°ë‚˜, ë†’ì´ ê°±ì‹ ì´ í•„ìš”í•œê²ƒë“¤ ì²˜ë¦¬</span>
            <span class="n">oldHight</span> <span class="o">=</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hi</span> <span class="o">&gt;=</span> <span class="n">oldHight</span><span class="o">){</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">currentHigh</span> <span class="o">==</span> <span class="n">hi</span><span class="o">){</span>
                    <span class="n">keyPoints</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">currIdx</span><span class="o">);</span>
                    <span class="n">currIdx</span><span class="o">--;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>    
                    <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">hi</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">oldHight</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">currIdx</span> <span class="o">++;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">hi</span> <span class="o">&gt;</span> <span class="n">oldHight</span> <span class="o">&amp;&amp;</span> <span class="n">currentHigh</span> <span class="o">!=</span> <span class="n">oldHight</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">currIdx</span> <span class="o">&gt;=</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">||</span> <span class="n">keyPoints</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currIdx</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">ri</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">keyPoints</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">currIdx</span><span class="o">,</span> <span class="n">makeKeyPoint</span><span class="o">(</span><span class="n">ri</span><span class="o">,</span> <span class="n">oldHight</span><span class="o">));</span>
                <span class="n">currentHigh</span> <span class="o">=</span> <span class="n">oldHight</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">lastLowXIdx</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="nf">makeKeyPoint</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">keyPoint</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;(</span><span class="mi">2</span><span class="o">);</span>
        <span class="n">keyPoint</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="n">keyPoint</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">y</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">keyPoint</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET